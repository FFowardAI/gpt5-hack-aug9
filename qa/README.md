# Visual QA Testing Structure

This directory contains the visual testing infrastructure for the GPT-5 x Maestro Visual QA system.

## Directory Structure

```
qa/
├── baselines/          # Versioned golden images (committed to repo)
│   ├── home-initial.png
│   ├── home-after-cta.png
│   └── checkout-complete.png
├── generated/          # New screenshots generated by Maestro (temporary)
│   ├── home-initial.png
│   ├── home-after-cta.png
│   └── checkout-complete.png
├── reports/            # Generated markdown reports from GPT-5 (temporary)
│   └── visual-diff.md
└── README.md           # This file
```

## Workflow

1. **User makes UI changes** through Cursor
2. **MCP Server + GPT-5** generates Maestro tests and runs them
3. **Maestro captures screenshots** → saved to `qa/generated/`
4. **GPT-5 analyzes changes** → creates report in `qa/reports/visual-diff.md`
5. **CI workflow** detects changes and posts PR comment with:
   - Before/after image comparisons
   - GPT-5 generated analysis
   - Links to full artifacts

## File Management

### Baselines (`qa/baselines/`)
- **Purpose**: Golden reference images
- **Storage**: Committed to main branch (consider Git LFS for large files)
- **Updates**: Only updated when changes are intentionally approved
- **Structure**: Flat structure with descriptive filenames (e.g., `home-after-cta.png`)

### Generated (`qa/generated/`)
- **Purpose**: New screenshots from current test run
- **Storage**: Temporary, can be cleaned up after PR comment
- **Structure**: Same as baselines for 1:1 comparison

### Reports (`qa/reports/`)
- **Purpose**: GPT-5 generated markdown analysis
- **Storage**: Temporary, included in PR comment then can be cleaned up
- **Content**: Summary of visual changes, impact analysis, recommendations

## CI Integration

The GitHub Actions workflow (`.github/workflows/visual-pr.yml`) automatically:

1. Detects when `qa/generated/` or `qa/reports/` have changes
2. Reads the generated markdown report
3. Creates before/after image comparisons using GitHub's raw content URLs
4. Posts a comprehensive PR comment with visual diff results

## Approving New Baselines

When visual changes are intentional:

1. Review the PR comment with before/after images
2. If changes look correct, manually copy files from `qa/generated/` to `qa/baselines/`
3. Commit the baseline updates
4. The next test run will use the new baselines

## Integration with GPT-5 System

This structure supports the full GPT-5 Visual QA loop:

- **Input**: User's natural language UI change request
- **Processing**: GPT-5 generates tests → Maestro executes → GPT-5 analyzes results
- **Output**: Structured visual diff with AI analysis posted to PR
- **Iteration**: If changes don't match intent, GPT-5 suggests code fixes

The system enables non-coders to iterate on frontend development with AI-powered visual validation and automatic PR reporting.
